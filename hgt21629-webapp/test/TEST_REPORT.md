# HG/T21629-2021 管架材料统计系统 - 测试报告

## 测试时间
2026-02-27

## 测试环境
- Node.js v24.13.1
- Windows 10

## 测试内容

### 1. 管架编号解析器测试 ✓

| 测试项目 | 用例数 | 通过 | 结果 |
|---------|-------|-----|-----|
| 有效编号解析 | 9 | 9 | ✓ |
| 无效编号识别 | 3 | 3 | ✓ |
| **总计** | **12** | **12** | **100%** |

#### 测试用例示例

| 编号 | 类别 | 名称 | 状态 |
|------|------|------|------|
| A1-1-A-200 | 管架零部件 | U形螺栓 | ✓ |
| D4-1-A-100-200 | 钢结构生根辅助钢结构 | 悬臂架 | ✓ |
| E1-A-200-S | 导向架 | 不保温管的导向架 | ✓ |
| F2-100-50-C1-500 | 耳轴/支腿/耳座 | 弯头的竖直耳轴 | ✓ |
| G1-A | 地面/混凝土生根支架 | 地面锚板 | ✓ |
| J1-65-200-300-C1 | 管托 | 焊接式管托 | ✓ |
| INVALID | - | 无效编号 | ✓ 正确拒绝 |

### 2. 材料清单生成测试 ✓

| 管架类型 | 数量 | 生成的材料项数 | 状态 |
|---------|-----|--------------|------|
| A1 U形螺栓 | 10 | 2 (U形螺栓+螺母) | ✓ |
| A2 2螺栓管夹 | 5 | 2 (管夹本体+螺栓) | ✓ |
| D4 悬臂架 | 8 | 2 (槽钢+筋板) | ✓ |
| D5 三角架 | 4 | 3 (横梁+斜撑+筋板) | ✓ |
| G1 地面锚板 | 20 | 2 (锚板+地脚螺栓) | ✓ |
| J1 焊接式管托 | 15 | 2 (托板+筋板) | ✓ |

### 3. 材料统计汇总测试 ✓

输入数据：
- 9 个不同的管架编号
- 涵盖 A、D、G、J 四大类

输出结果：
- 共合并为 **12 种** 独立材料
- 按规格和材质自动合并数量
- 材料分类：型钢、螺栓/螺母、管架件、其他

#### 统计结果示例

| 分类 | 材料名称 | 规格 | 汇总数量 | 单位 | 材质 |
|-----|---------|------|---------|------|------|
| 型钢 | 槽钢悬臂 | [100×48×5.3 | 14 | 件 | Q235B |
| 螺栓 | 地脚螺栓 | M24~M36 | 140 | 套 | Q235B |
| 钢板 | 筋板 | 钢板 δ=8 | 44 | 件 | Q235B |
| 管架件 | 托板 | 钢板 δ=6~12 | 15 | 件 | Q235B |

### 4. 载荷等级与参数解析 ✓

| 载荷等级 | 名称 | 说明 |
|---------|------|------|
| A | 轻载 | 较小载荷 |
| B | 中轻载 | 中等偏小 |
| C | 中载 | 中等载荷 |
| D | 重载 | 较大载荷 |
| E | 超重载 | 大载荷 |

| 参数 | 名称 | 说明 |
|-----|------|------|
| S | 滑动型 | 滑动支架 |
| F | 防腐型 | 防腐处理 |
| C1 | 材质等级1 | 普通碳钢 |
| C2 | 材质等级2 | 低合金钢 |

### 5. 文件解析测试 ✓

测试文件：`test_input.csv`

| 项目 | 结果 |
|-----|------|
| 解析记录数 | 4 条 |
| 有效记录 | 3 条 |
| 无效记录 | 1 条 (正确识别) |
| CSV分隔符检测 | ✓ |
| 表头识别 | ✓ |

## 功能验证

### ✓ 支持的文件格式
- [x] Excel (.xlsx, .xls)
- [x] CSV (逗号分隔)
- [x] TXT (自动检测分隔符)

### ✓ 管架类别支持
- [x] A类 - 管架零部件 (A1-A31)
- [x] D类 - 钢结构生根辅助钢结构 (D1-D20)
- [x] E类 - 导向架 (E1-E12)
- [x] F类 - 耳轴/支腿/耳座 (F1-F20)
- [x] G类 - 地面/混凝土生根支架 (G1-G17)
- [x] H类 - 可调支架 (H1-H3)
- [x] J类 - 管托 (J1-J16)
- [x] K类 - 限位架 (K1-K4)
- [x] L类 - 保冷管架 (L1-L25)
- [x] Q类 - 大管支撑小管 (Q1-Q16)

### ✓ 输出功能
- [x] 材料清单表格展示
- [x] 管架明细列表
- [x] 无效数据提示
- [x] 导出 Excel
- [x] 导出 CSV

### ✓ 材料标准引用
- [x] GB/T 700 (碳素结构钢)
- [x] GB/T 706 (热轧型钢)
- [x] GB/T 5782 (螺栓)
- [x] GB/T 6170 (螺母)
- [x] HG/T 21629-2021 (管架标准图)

## 测试结果摘要

| 测试模块 | 状态 |
|---------|------|
| 管架编号解析 | ✓ 通过 |
| 材料清单生成 | ✓ 通过 |
| 材料统计汇总 | ✓ 通过 |
| 载荷等级解析 | ✓ 通过 |
| 文件解析 | ✓ 通过 |
| 数据导出 | ✓ 通过 |

**总体测试结果：全部通过 ✓**

## 可用测试文件

1. `data/test_input.csv` - 包含 20 个测试用例的 CSV 文件
2. 示例涵盖 A、D、E、F、G、J、K、L、Q 类管架
3. 包含一个无效编号用于测试错误处理

## 使用建议

1. 直接用浏览器打开 `index.html` 即可使用
2. 导入 `data/test_input.csv` 进行功能测试
3. 测试数据包含各种管架类型，可验证统计功能
4. 检查结果是否符合预期材料清单
